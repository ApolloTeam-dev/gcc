# Makefile fragment for AmigaOS target.

# Extra object file linked to the cc1* executables.
amigaos.o: $(srcdir)/config/m68k/amigaos.c $(CONFIG_H)
	$(CXX) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) $< $(OUTPUT_OPTION)

# Additional target dependent options for compiling libgcc.a.  This just
# ensures that we don't compile libgcc* with anything other than a
# fixed stack.

#TARGET_LIBGCC2_CFLAGS = -mfixedstack

### begin-GG-local: dynamic libraries
# Extra objects that get compiled and linked to collect2

EXTRA_COLLECT2_OBJS = amigacollect2.o

# Build supplimentary AmigaOS target support file for collect2
amigacollect2.o: amigacollect2.c
	$(CXX) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \
	-DA2IXDIR_PREFIX=\"$(prefix)/share/a2ixlibrary\" $< $(OUTPUT_OPTION)
### end-GG-local

# Support for building multiple version of libgcc, libquadmath, libobjc and libstdc++-v3
MULTILIB_OPTIONS    = mcpu=68020 fbaserel/fbaserel32
MULTILIB_DIRNAMES   = libm020 libb libb32
MULTILIB_EXTRA_OPTS = 
MULTILIB_EXCEPTIONS = fbaserel32 